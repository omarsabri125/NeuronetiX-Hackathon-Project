schema: '2.0'
stages:
  prepare:
    cmd: python -m src.data.preprocessing
    deps:
    - path: src/data/preprocessing.py
      hash: md5
      md5: efcb379f6b69b42ad54079816248ed47
      size: 8299
    params:
      params.yaml:
        prepare:
          input_file: assets/Telecom_Customers_Churn_Dataset.csv
          output_dir: data/processed
          test_size: 0.2
          random_state: 42
          use_smoteenn: false
          drop_columns:
          - customerID
          - PhoneService
          - gender
          - StreamingTV
          - StreamingMovies
          - MultipleLines
          target_column: Churn
    outs:
    - path: data/processed/with_smoteenn/X_test.csv
      hash: md5
      md5: b8c1fe37e0eab2fbb63dfa3920fb62e5
      size: 115775
    - path: data/processed/with_smoteenn/X_train.csv
      hash: md5
      md5: 5e9303177be0a956a81d732e343e04f4
      size: 382410
    - path: data/processed/with_smoteenn/y_test.csv
      hash: md5
      md5: e958151f165f7f472b725188c9e97a20
      size: 4234
    - path: data/processed/with_smoteenn/y_train.csv
      hash: md5
      md5: dc44d7704708d7fe7b2365af69afc084
      size: 13972
    - path: data/processed/without_smoteenn/X_test.csv
      hash: md5
      md5: 6b539011b76de433c62fcb7cd2cf9103
      size: 115076
    - path: data/processed/without_smoteenn/X_train.csv
      hash: md5
      md5: 77865c883acd73d30dd7ad7118f9e1bb
      size: 460252
    - path: data/processed/without_smoteenn/y_test.csv
      hash: md5
      md5: e958151f165f7f472b725188c9e97a20
      size: 4234
    - path: data/processed/without_smoteenn/y_train.csv
      hash: md5
      md5: f597c5156799e0428077438ebc926949
      size: 16909
    - path: models/with_smoteenn/label_encoders.pkl
      hash: md5
      md5: abb72adc74654f974d727e64164a0de2
      size: 93868
    - path: models/with_smoteenn/scaler.pkl
      hash: md5
      md5: 2f9a7ea29d302c5468cfa7db9fdabf2f
      size: 570
    - path: models/without_smoteenn/label_encoders.pkl
      hash: md5
      md5: abb72adc74654f974d727e64164a0de2
      size: 93868
    - path: models/without_smoteenn/scaler.pkl
      hash: md5
      md5: 461c6a1273350365502d679ec416f63e
      size: 570
  train_logistic_regression:
    cmd: python -m src.training.train_logistic_mlflow --C 2.5 --penalty l2
    deps:
    - path: data/processed/with_smoteenn/X_test.csv
      hash: md5
      md5: b8c1fe37e0eab2fbb63dfa3920fb62e5
      size: 115775
    - path: data/processed/with_smoteenn/X_train.csv
      hash: md5
      md5: 5e9303177be0a956a81d732e343e04f4
      size: 382410
    - path: data/processed/with_smoteenn/y_test.csv
      hash: md5
      md5: e958151f165f7f472b725188c9e97a20
      size: 4234
    - path: data/processed/with_smoteenn/y_train.csv
      hash: md5
      md5: dc44d7704708d7fe7b2365af69afc084
      size: 13972
    - path: data/processed/without_smoteenn/X_test.csv
      hash: md5
      md5: 6b539011b76de433c62fcb7cd2cf9103
      size: 115076
    - path: data/processed/without_smoteenn/X_train.csv
      hash: md5
      md5: 77865c883acd73d30dd7ad7118f9e1bb
      size: 460252
    - path: data/processed/without_smoteenn/y_test.csv
      hash: md5
      md5: e958151f165f7f472b725188c9e97a20
      size: 4234
    - path: data/processed/without_smoteenn/y_train.csv
      hash: md5
      md5: f597c5156799e0428077438ebc926949
      size: 16909
    - path: src/evaluation/metrics.py
      hash: md5
      md5: 07d1653b5205dd18a8748e1e6d1fbd81
      size: 547
    - path: src/models/logistic_model.py
      hash: md5
      md5: 8da7bf66a15c1f08b56b4fb27d80b271
      size: 428
    - path: src/training/train_logistic_mlflow.py
      hash: md5
      md5: 14518bcf90b893128b54d041af653ffc
      size: 2076
    - path: src/utils/plotting.py
      hash: md5
      md5: 8f1c0cc2a82e040acbfe8028bb0ee475
      size: 1575
    outs:
    - path: models/with_smoteenn/logistic_regression.pkl
      hash: md5
      md5: abc0f6cff670354c4f788a31e26fd1e3
      size: 1124
    - path: models/without_smoteenn/logistic_regression.pkl
      hash: md5
      md5: c2a36f468fcfa44d861b5fd7b045dd3e
      size: 1124
  train_random_forest:
    cmd: python -m src.training.train_rf_mlflow --n_estimators 200 --max_depth 
      10
    deps:
    - path: data/processed/with_smoteenn/X_test.csv
      hash: md5
      md5: b8c1fe37e0eab2fbb63dfa3920fb62e5
      size: 115775
    - path: data/processed/with_smoteenn/X_train.csv
      hash: md5
      md5: 5e9303177be0a956a81d732e343e04f4
      size: 382410
    - path: data/processed/with_smoteenn/y_test.csv
      hash: md5
      md5: e958151f165f7f472b725188c9e97a20
      size: 4234
    - path: data/processed/with_smoteenn/y_train.csv
      hash: md5
      md5: dc44d7704708d7fe7b2365af69afc084
      size: 13972
    - path: data/processed/without_smoteenn/X_test.csv
      hash: md5
      md5: 6b539011b76de433c62fcb7cd2cf9103
      size: 115076
    - path: data/processed/without_smoteenn/X_train.csv
      hash: md5
      md5: 77865c883acd73d30dd7ad7118f9e1bb
      size: 460252
    - path: data/processed/without_smoteenn/y_test.csv
      hash: md5
      md5: e958151f165f7f472b725188c9e97a20
      size: 4234
    - path: data/processed/without_smoteenn/y_train.csv
      hash: md5
      md5: f597c5156799e0428077438ebc926949
      size: 16909
    - path: src/evaluation/metrics.py
      hash: md5
      md5: 07d1653b5205dd18a8748e1e6d1fbd81
      size: 547
    - path: src/models/random_forest_model.py
      hash: md5
      md5: 55d7209f2d5ef178d5982da161b82c7a
      size: 426
    - path: src/training/train_rf_mlflow.py
      hash: md5
      md5: 2f39694e2c9ba0bb814b618abf2bc1a4
      size: 2173
    - path: src/utils/plotting.py
      hash: md5
      md5: 8f1c0cc2a82e040acbfe8028bb0ee475
      size: 1575
    outs:
    - path: models/with_smoteenn/random_forest.pkl
      hash: md5
      md5: 2cb56a7130d0faaca2b54131e2ce8098
      size: 7302978
    - path: models/without_smoteenn/random_forest.pkl
      hash: md5
      md5: 9862e5bac720737e5e63b99e5de93cc5
      size: 12206218
